<%= simple_form_for [:admin, @administrator], wrapper: :admin_form, html: {class: 'admin_form'} do |f| %>
    <%= f.error_notification %>
    <div class="form-body form-horizontal">
      <%= f.fields_for :user, wrapper: :admin_form, html: {'data-parsley-validate': true, class: 'form-horizontal'} do |user| %>
        <%= user.input :login, label: '管理员账号：', autofocus: true, required: true, input_html: {value: @administrator.user.try(:login)} %>
      <% end %>
      <%= f.input :nickname, label: '管理员昵称：', required: true %>
      <%= f.input :kind, as: :radio_buttons, wrapper: :inline_inputs, collection: Administrator.options_for_some_select(:kinds, ['system_administrator', 'project_administrator', 'financial_staff', 'operator']), label: '管理员类型：'%>
      <%= f.fields_for :user, wrapper: :admin_form, html: {'data-parsley-validate': true, class: 'form-horizontal'} do |user| %>
          <%= user.input :password, label: '设置密码：', hint: '设置登录密码', placeholder: '如果不修改密码，请留空', input_html: {id: 'password'}, required: true %>
          <%= user.input :password_confirmation, label: '确认密码：', hint: '重新输入一次密码', input_html: {id: 'password_confirmation'}, required: true %>
      <% end %>
    </div>
    <div class="form-actions">
      <div class="row">
        <div class="col-md-offset-3 col-md-9">
          <%= f.button :submit, '提交', class: 'btn green' %>
          <%= link_to '取消', admin_administrators_path, class: 'btn' %>
        </div>
      </div>
    </div>
<% end %>
<script>
    $(function(){
        //    表单验证
        $(".admin_form").html5Validate(function(){
            $(this).find('[type="submit"]').attr('disabled','disabled');
            this.submit();
        },  {
                validate: function() {
                    var password = $('#password').val();
                    var password_confirmation = $('#password_confirmation').val();
                    if (password !== password_confirmation) {
                        alert("确认密码错误");
                        return false;
                    }
                    return true;
                }
            });
    })
</script>
